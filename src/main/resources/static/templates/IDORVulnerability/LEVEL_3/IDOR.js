function showResponse(data) {
  document.getElementById("response").innerHTML = data.content;

  // Auto-fill token after login
  if (data.content.startsWith("Token:")) {
    let token = data.content.replace("Token: ", "");
    document.getElementById("tokenInput").value = token;
  }
}

// LOGIN
document.getElementById("loginBtn").addEventListener("click", function () {
  let username = document.getElementById("username").value;
  let password = document.getElementById("password").value;

  let url =
    getUrlForVulnerabilityLevel() +
    "?username=" +
    username +
    "&password=" +
    password;

  doGetAjaxCall(showResponse, url, true);
});

// FETCH PROFILE
document.getElementById("fetchBtn").addEventListener("click", function () {
  let token = document.getElementById("tokenInput").value;

  let url = getUrlForVulnerabilityLevel() + "?token=" + token;

  doGetAjaxCall(showResponse, url, true);
});
