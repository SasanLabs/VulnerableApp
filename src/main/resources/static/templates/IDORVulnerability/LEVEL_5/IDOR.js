function addingEventListenerToFetchData() {
  document
    .getElementById("fetchDetails")
    .addEventListener("click", function () {
      let accountRef = document.getElementById("accountRef").value;
      let url = getUrlForVulnerabilityLevel();
      let queryParams =
        "?accountRef=" + accountRef + "&loggedInUser=" + loggedInUser;

      let loggedInUserField = document.getElementById("loggedInUser");

      if (loggedInUserField) {
        queryParams += "&loggedInUser=" + loggedInUserField.value;
      }

      doGetAjaxCall(fetchDataCallback, url + queryParams, true);
    });
}

addingEventListenerToFetchData();

function fetchDataCallback(data) {
  let responseDiv = document.getElementById("response");

  if (data.isValid) {
    responseDiv.style.color = "green";
  } else {
    responseDiv.style.color = "red";
  }

  responseDiv.innerHTML = data.content;
}
